<aside id="sidebar" class="group bg-card border-r border-border transition-all duration-300 ease-in-out" style="width: 20%;" data-collapsed="false">
  <div class="h-full flex flex-col">
    <div class="flex justify-end p-2">
      <button 
        id="sidebar-toggle" 
        onclick="toggleSidebar()"
        class="text-muted-foreground hover:text-foreground transition-colors p-1 rounded hover:bg-muted"
        aria-label="Toggle sidebar"
      >
        <!-- Chevron Left (shown when expanded) -->
        <svg id="sidebar-chevron-left" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
          <path stroke-linecap="round" stroke-linejoin="round" d="m18.75 4.5-7.5 7.5 7.5 7.5m-6-15L5.25 12l7.5 7.5" />
        </svg>
        <!-- Chevron Right (shown when collapsed) -->
        <svg id="sidebar-chevron-right" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6 hidden">
          <path stroke-linecap="round" stroke-linejoin="round" d="m5.25 4.5 7.5 7.5-7.5 7.5m6-15 7.5 7.5-7.5 7.5" />
        </svg>
      </button>
    </div>
    <nav class="flex-1 px-6 py-12 group-data-[collapsed=true]:hidden">
      <button 
        id="single-elimination-btn"
        onclick="startSingleEliminationBracket()"
        class="w-full px-6 py-3 bg-primary text-primary-foreground rounded-md hover:opacity-90 transition-opacity font-medium text-center text-nowrap overflow-hidden text-ellipsis whitespace-nowrap"
      >
        Single Elimination
      </button>
      <!-- TODO: Add more tournament types here -->
    </nav>
  </div>
</aside>

<script>
  function toggleSidebar() {
    const sidebar = document.getElementById('sidebar');
    const chevronLeft = document.getElementById('sidebar-chevron-left');
    const chevronRight = document.getElementById('sidebar-chevron-right');
    const isCollapsed = sidebar.dataset.collapsed === 'true';
    
    if (isCollapsed) {
      // Expand sidebar
      sidebar.style.width = '20%';
      sidebar.style.minWidth = '200px';
      sidebar.style.overflow = 'visible';
      sidebar.dataset.collapsed = 'false';
      chevronLeft.classList.remove('hidden');
      chevronRight.classList.add('hidden');
    } else {
      // Collapse sidebar
      sidebar.style.width = '5%';
      sidebar.style.minWidth = '50px';
      sidebar.style.overflow = 'hidden';
      sidebar.dataset.collapsed = 'true';
      chevronLeft.classList.add('hidden');
      chevronRight.classList.remove('hidden');
    }
  }
  
  function startSingleEliminationBracket() {
    // Prompt user for number of competitors or use default
    const numCompetitors = prompt('Enter number of competitors (default: 8):', '8');
    
    if (numCompetitors === null) {
      // User cancelled
      return;
    }
    
    const num = parseInt(numCompetitors, 10);
    
    if (isNaN(num) || num < 2) {
      alert('Please enter a valid number of competitors (minimum 2)');
      return;
    }
    
    // Generate default competitor names
    const competitors = [];
    for (let i = 1; i <= num; i++) {
      competitors.push(`Competitor ${i}`);
    }
    
    // Initialize bracket using BracketManager
    if (window.startNewBracket) {
      window.startNewBracket(competitors);
      
      // Ensure we're in Draft Mode for a new bracket
      if (window.tournamentState && window.tournamentState.isActiveMode()) {
        // Click the bracket mode toggle to switch to Draft Mode
        const toggleButton = document.getElementById('bracket-mode-toggle');
        if (toggleButton) {
          toggleButton.click();
        }
      }
    } else {
      console.error('BracketManager not loaded');
      alert('Bracket manager not ready. Please refresh the page and try again.');
    }
  }
</script>

